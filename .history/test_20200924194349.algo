DEFINE battery USING _columnAmount AND _floorAmount AND _floorGroup AND _elevatorAmountPerColumn AND _direction AND _floor
    columnList: EMPTY LIST
    status: Online
    callButtonList: EMPTY LIST

    SEQUENCE createColumnList USING _columnAmount AND _elevatorAmountPerColumn
        INIT iterator TO 1
        FOR _columnAmount
            INIT newColumn TO INSTANTIATE column WITH iterator AND _floorAmount AND _minimumFloor AND _maximumFloor AND _elevatorAmountPerColumn
            ADD newColumn TO columnList
            INCREMENT iterator 
        ENDFOR
    ENDSEQUENCE

    SEQUENCE createCallButtonList USING AND _batteryLowestFloor AND _floorAmount
        INIT iterator TO _batteryLowestFloor
        FOR _floorAmount
            IF iterator IS NOT EQUAL TO 0
                IF iterator IS LESS THAN 1
                    INIT newCallButton TO INSTANTIATE callButton WITH Down AND iterator
                    AND newCallButton TO callButtonList
                ENDIF
                IF iterator IS GREATER THAN 1
                    INIT newCallButton TO INSTANTIATE callButton WITH Up AND iterator
                    AND newCallButton TO callButtonList
                ENDIF
                INCREMENT iterator BY 1
        ENDFOR
    ENDSEQUENCE

    SEQUENCE requestElevator USING _requestedFloor
        CALL findColumn
        CALL findBestElevator RETURNING elevator
        ADD requestFloor TO requestList OF elevator
        CALL moveElevator WITH elevator
        CALL openDoors WITH elevator
    ENDSEQUENCE

    SEQUENCE findColumn USING _requestedFloor AND _floorGroup
        FOR _floorGroup
            IF iterator IS LESS THAN 1
        RETURN column 
    ENDSEQUENCE

    SEQUENCE findBestElevator USING _destination
    ENDSEQUENCE    

    CALL createColumnList WITH _columnAmount AND _elevatorAmountPerColumn
    CALL createCallButtonList WITH _batteryLowestFloor AND _elevatorAmountPerColumn
ENDDEFINE



DEFINE column USING _id AND _floorAmount AND _minimumFloor AND _maximumFloor AND _elevatorAmountPerColumn
    ID: _id
    status: Online
    floorAmount: _floorAmount
    minimumFloor: _minimumFloor
    maximumFloor: _maximumFloor
    elevatorList: EMPTY LIST

    SEQUENCE createElevatorList USING _elevatorAmountPerColumn
        INIT iterator TO 1
        FOR _elevatorAmountPerColumn
            INIT newElevator TO INSTANTIATE elevator WITH iterator
            INCREMENT iterator
        ENDFOR
    SEQUENCE

    CALL createElevatorList USING _elevatorAmountPerColumn
ENDDEFINE



DEFINE elevator USING _id 
    ID: _id,
    direction: None             //None, Up, Down
    status: Idle                //Idle, Moving, Stopped, Maintenance, Offile
    currentFloor: 1
    maximumWeight: Over 9000
    doors: closed
    requestList: EMPTY List
ENDDEFINE


DEFINE callButton USING _direction AND _floor
    status: OFF
    direction: _direction
    floor: _floor
ENDDEFINE



SEQUENCE requestFloor USING _destination

ENDSEQUENCE

--------------------TEST-------------------
_columnAmount AND _floorAmount AND _floorGroup AND _elevatorAmountPerColumn AND _batteryLowestFloor
INIT battery1 TO INSTANTIATE battery WITH 4, 66, [(-6,1), (1,20), ], 3, -6

    Senario 1 
CALL requestElevator OF battery1 WITH 1 AND Up
CALL requestFloor OF battery1 WITH 20

    Senario 2
CALL requestElevator OF battery1 WITH 1 AND Up
CALL requestFloor OF battery1 WITH 45

    Senario 3
CALL requestElevator OF battery1 WITH 4 AND Down
CALL requestFloor OF battery1 WITH 1
--------------------TEST-------------------